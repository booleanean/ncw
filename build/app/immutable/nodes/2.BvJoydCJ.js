import{s as ke,n as q,b as Ee,r as $e,o as Ce,f as Ie,e as Ae}from"../chunks/scheduler.Cv6dzE50.js";import{S as Te,i as je,e as k,s as O,c as E,d as j,g,h as S,o as b,j as I,k as m,y as P,z as G,p as Y,b as M,f as V,l as Q,m as Z,A as U,B as ee,t as x,n as Oe,a as K,u as Se,v as De,w as Be,x as Ne,q as Ge}from"../chunks/index.Didnr6p9.js";import{w as we}from"../chunks/index.Bvnd0Eds.js";function A(a){return(a==null?void 0:a.length)!==void 0?a:Array.from(a)}function te(a,e,s){const l=a.slice();return l[8]=e[s][0],l[9]=e[s][1],l[11]=s,l}function le(a,e,s){const l=a.slice();return l[12]=e[s],l[14]=s,l}function se(a,e,s){const l=a.slice();return l[15]=e[s],l[17]=s,l}function ne(a,e,s){const l=a.slice();return l[18]=e[s],l}function ae(a,e,s){const l=a.slice();return l[18]=e[s],l[14]=s,l}function oe(a,e,s){const l=a.slice();return l[22]=e[s],l[17]=s,l}function re(a,e,s){const l=a.slice();return l[18]=e[s],l}function ce(a){let e,s,l,r,n,f,c,d,h,p,o=A(a[1].participants),t=[];for(let i=0;i<o.length;i+=1)t[i]=ie(re(a,o,i));let v=A(a[1].participants),u=[];for(let i=0;i<v.length;i+=1)u[i]=ue(ae(a,v,i));return{c(){e=k("thead"),s=k("tr"),l=k("th"),r=k("label"),n=k("input"),f=O();for(let i=0;i<t.length;i+=1)t[i].c();c=O(),d=k("tbody");for(let i=0;i<u.length;i+=1)u[i].c();this.h()},l(i){e=E(i,"THEAD",{});var w=j(e);s=E(w,"TR",{class:!0});var _=j(s);l=E(_,"TH",{class:!0});var D=j(l);r=E(D,"LABEL",{style:!0,class:!0});var R=j(r);n=E(R,"INPUT",{type:!0,name:!0,class:!0}),R.forEach(g),D.forEach(g),f=S(_);for(let N=0;N<t.length;N+=1)t[N].l(_);_.forEach(g),w.forEach(g),c=S(i),d=E(i,"TBODY",{});var B=j(d);for(let N=0;N<u.length;N+=1)u[N].l(B);B.forEach(g),this.h()},h(){b(n,"type","checkbox"),b(n,"name","colorblind"),b(n,"class","svelte-16v8pjp"),Y(r,"width","100%"),Y(r,"height","100%"),b(r,"class","svelte-16v8pjp"),b(l,"class","svelte-16v8pjp"),b(s,"class","svelte-16v8pjp")},m(i,w){I(i,e,w),m(e,s),m(s,l),m(l,r),m(r,n),n.checked=a[0],m(s,f);for(let _=0;_<t.length;_+=1)t[_]&&t[_].m(s,null);I(i,c,w),I(i,d,w);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(d,null);h||(p=P(n,"change",a[6]),h=!0)},p(i,w){if(w&1&&(n.checked=i[0]),w&2){o=A(i[1].participants);let _;for(_=0;_<o.length;_+=1){const D=re(i,o,_);t[_]?t[_].p(D,w):(t[_]=ie(D),t[_].c(),t[_].m(s,null))}for(;_<t.length;_+=1)t[_].d(1);t.length=o.length}if(w&2){v=A(i[1].participants);let _;for(_=0;_<v.length;_+=1){const D=ae(i,v,_);u[_]?u[_].p(D,w):(u[_]=ue(D),u[_].c(),u[_].m(d,null))}for(;_<u.length;_+=1)u[_].d(1);u.length=v.length}},d(i){i&&(g(e),g(c),g(d)),G(t,i),G(u,i),h=!1,p()}}}function ie(a){let e,s,l,r=a[18]+"",n;return{c(){e=k("th"),s=k("div"),l=k("span"),n=M(r),this.h()},l(f){e=E(f,"TH",{class:!0});var c=j(e);s=E(c,"DIV",{class:!0});var d=j(s);l=E(d,"SPAN",{class:!0});var h=j(l);n=V(h,r),h.forEach(g),d.forEach(g),c.forEach(g),this.h()},h(){b(l,"class","svelte-16v8pjp"),b(s,"class","svelte-16v8pjp"),b(e,"class","svelte-16v8pjp")},m(f,c){I(f,e,c),m(e,s),m(s,l),m(l,n)},p(f,c){c&2&&r!==(r=f[18]+"")&&Q(n,r)},d(f){f&&g(e)}}}function Le(a){let e,s,l,r;return{c(){e=k("td"),s=k("label"),l=k("input"),this.h()},l(n){e=E(n,"TD",{class:!0});var f=j(e);s=E(f,"LABEL",{class:!0});var c=j(s);l=E(c,"INPUT",{type:!0,name:!0,class:!0}),c.forEach(g),f.forEach(g),this.h()},h(){b(l,"type","checkbox"),b(l,"name",`${a[14]}-${a[17]}`),l.checked=r=a[1].grid.indexOf(`${a[14]}-${a[17]}`)!==-1,b(l,"class","svelte-16v8pjp"),b(s,"class","svelte-16v8pjp"),b(e,"class","svelte-16v8pjp")},m(n,f){I(n,e,f),m(e,s),m(s,l)},p(n,f){f&2&&r!==(r=n[1].grid.indexOf(`${n[14]}-${n[17]}`)!==-1)&&(l.checked=r)},d(n){n&&g(e)}}}function He(a){let e,s="Â ";return{c(){e=k("td"),e.textContent=s,this.h()},l(l){e=E(l,"TD",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1sj9f50"&&(e.textContent=s),this.h()},h(){b(e,"class","black svelte-16v8pjp")},m(l,r){I(l,e,r)},p:q,d(l){l&&g(e)}}}function he(a){let e;function s(n,f){return n[14]==n[17]?He:Le}let r=s(a)(a);return{c(){r.c(),e=Z()},l(n){r.l(n),e=Z()},m(n,f){r.m(n,f),I(n,e,f)},p(n,f){r.p(n,f)},d(n){n&&g(e),r.d(n)}}}function ue(a){let e,s,l=a[18]+"",r,n,f,c,d=A(a[1].participants),h=[];for(let p=0;p<d.length;p+=1)h[p]=he(oe(a,d,p));return{c(){e=k("tr"),s=k("td"),r=M(l),n=M("'s thread"),f=O();for(let p=0;p<h.length;p+=1)h[p].c();c=O(),this.h()},l(p){e=E(p,"TR",{class:!0});var o=j(e);s=E(o,"TD",{class:!0});var t=j(s);r=V(t,l),n=V(t,"'s thread"),t.forEach(g),f=S(o);for(let v=0;v<h.length;v+=1)h[v].l(o);c=S(o),o.forEach(g),this.h()},h(){b(s,"class","svelte-16v8pjp"),b(e,"class","svelte-16v8pjp")},m(p,o){I(p,e,o),m(e,s),m(s,r),m(s,n),m(e,f);for(let t=0;t<h.length;t+=1)h[t]&&h[t].m(e,null);m(e,c)},p(p,o){if(o&2&&l!==(l=p[18]+"")&&Q(r,l),o&2){d=A(p[1].participants);let t;for(t=0;t<d.length;t+=1){const v=oe(p,d,t);h[t]?h[t].p(v,o):(h[t]=he(v),h[t].c(),h[t].m(e,c))}for(;t<h.length;t+=1)h[t].d(1);h.length=d.length}},d(p){p&&g(e),G(h,p)}}}function fe(a){let e,s,l,r=a[18]+"",n;return{c(){e=k("th"),s=k("div"),l=k("span"),n=M(r),this.h()},l(f){e=E(f,"TH",{class:!0});var c=j(e);s=E(c,"DIV",{class:!0});var d=j(s);l=E(d,"SPAN",{class:!0});var h=j(l);n=V(h,r),h.forEach(g),d.forEach(g),c.forEach(g),this.h()},h(){b(l,"class","svelte-16v8pjp"),b(s,"class","svelte-16v8pjp"),b(e,"class","svelte-16v8pjp")},m(f,c){I(f,e,c),m(e,s),m(s,l),m(l,n)},p:q,d(f){f&&g(e)}}}function pe(a){let e,s,l,r;return{c(){e=k("td"),s=k("label"),l=k("input"),this.h()},l(n){e=E(n,"TD",{class:!0});var f=j(e);s=E(f,"LABEL",{class:!0});var c=j(s);l=E(c,"INPUT",{type:!0,name:!0,class:!0}),c.forEach(g),f.forEach(g),this.h()},h(){b(l,"type","checkbox"),b(l,"name",`b${a[11]}-${a[14]}-${a[17]}`),l.checked=r=a[1].grid.indexOf(`b${a[11]}-${a[14]}-${a[17]}`)!==-1,b(l,"class","svelte-16v8pjp"),b(s,"class","svelte-16v8pjp"),b(e,"class","svelte-16v8pjp")},m(n,f){I(n,e,f),m(e,s),m(s,l)},p(n,f){f&2&&r!==(r=n[1].grid.indexOf(`b${n[11]}-${n[14]}-${n[17]}`)!==-1)&&(l.checked=r)},d(n){n&&g(e)}}}function _e(a){let e,s,l=A(a[9].participants),r=[];for(let n=0;n<l.length;n+=1)r[n]=pe(se(a,l,n));return{c(){e=k("tr");for(let n=0;n<r.length;n+=1)r[n].c();s=O(),this.h()},l(n){e=E(n,"TR",{class:!0});var f=j(e);for(let c=0;c<r.length;c+=1)r[c].l(f);s=S(f),f.forEach(g),this.h()},h(){b(e,"class","svelte-16v8pjp")},m(n,f){I(n,e,f);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null);m(e,s)},p(n,f){if(f&2){l=A(n[9].participants);let c;for(c=0;c<l.length;c+=1){const d=se(n,l,c);r[c]?r[c].p(d,f):(r[c]=pe(d),r[c].c(),r[c].m(e,s))}for(;c<r.length;c+=1)r[c].d(1);r.length=l.length}},d(n){n&&g(e),G(r,n)}}}function de(a){let e,s,l,r,n,f,c,d=A(a[9].participants),h=[];for(let t=0;t<d.length;t+=1)h[t]=fe(ne(a,d,t));let p=A(a[1].participants),o=[];for(let t=0;t<p.length;t+=1)o[t]=_e(le(a,p,t));return{c(){e=k("table"),s=k("thead"),l=k("tr");for(let t=0;t<h.length;t+=1)h[t].c();r=O(),n=k("tbody");for(let t=0;t<o.length;t+=1)o[t].c();f=O(),this.h()},l(t){e=E(t,"TABLE",{style:!0,class:!0});var v=j(e);s=E(v,"THEAD",{});var u=j(s);l=E(u,"TR",{class:!0});var i=j(l);for(let _=0;_<h.length;_+=1)h[_].l(i);i.forEach(g),u.forEach(g),r=S(v),n=E(v,"TBODY",{});var w=j(n);for(let _=0;_<o.length;_+=1)o[_].l(w);w.forEach(g),f=S(v),v.forEach(g),this.h()},h(){b(l,"class","svelte-16v8pjp"),b(e,"style",c=a[0]?"--colorblind-v: 'v'; --colorblind-x: 'x'":""),b(e,"class","bonus svelte-16v8pjp")},m(t,v){I(t,e,v),m(e,s),m(s,l);for(let u=0;u<h.length;u+=1)h[u]&&h[u].m(l,null);m(e,r),m(e,n);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(n,null);m(e,f)},p(t,v){if(v&4){d=A(t[9].participants);let u;for(u=0;u<d.length;u+=1){const i=ne(t,d,u);h[u]?h[u].p(i,v):(h[u]=fe(i),h[u].c(),h[u].m(l,null))}for(;u<h.length;u+=1)h[u].d(1);h.length=d.length}if(v&6){p=A(t[1].participants);let u;for(u=0;u<p.length;u+=1){const i=le(t,p,u);o[u]?o[u].p(i,v):(o[u]=_e(i),o[u].c(),o[u].m(n,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=p.length}v&1&&c!==(c=t[0]?"--colorblind-v: 'v'; --colorblind-x: 'x'":"")&&b(e,"style",c)},d(t){t&&g(e),G(h,t),G(o,t)}}}function Pe(a){let e,s,l,r,n,f,c=a[1].participants.length>0&&ce(a),d=A(a[2]),h=[];for(let p=0;p<d.length;p+=1)h[p]=de(te(a,d,p));return{c(){e=k("form"),s=k("table"),c&&c.c(),r=O();for(let p=0;p<h.length;p+=1)h[p].c();this.h()},l(p){e=E(p,"FORM",{class:!0});var o=j(e);s=E(o,"TABLE",{style:!0,class:!0});var t=j(s);c&&c.l(t),t.forEach(g),r=S(o);for(let v=0;v<h.length;v+=1)h[v].l(o);o.forEach(g),this.h()},h(){b(s,"style",l=a[0]?"--colorblind-v: 'v'; --colorblind-x: 'x'":""),b(s,"class","svelte-16v8pjp"),b(e,"class","svelte-16v8pjp")},m(p,o){I(p,e,o),m(e,s),c&&c.m(s,null),m(e,r);for(let t=0;t<h.length;t+=1)h[t]&&h[t].m(e,null);n||(f=P(e,"change",a[4]),n=!0)},p(p,[o]){if(p[1].participants.length>0?c?c.p(p,o):(c=ce(p),c.c(),c.m(s,null)):c&&(c.d(1),c=null),o&1&&l!==(l=p[0]?"--colorblind-v: 'v'; --colorblind-x: 'x'":"")&&b(s,"style",l),o&7){d=A(p[2]);let t;for(t=0;t<d.length;t+=1){const v=te(p,d,t);h[t]?h[t].p(v,o):(h[t]=de(v),h[t].c(),h[t].m(e,null))}for(;t<h.length;t+=1)h[t].d(1);h.length=d.length}},i:q,o:q,d(p){p&&g(e),c&&c.d(),G(h,p),n=!1,f()}}}function Re(a,e,s){let l,{groupId:r}=e,n,f=Object.keys(localStorage).filter(o=>o!==r);console.log(`Group name: ${r}, Other group: ${f[0]}`);let c=new Map;for(let o of f)c.set(o,JSON.parse(localStorage.getItem(o)||""));let d=we(JSON.parse(localStorage.getItem(r)||'{"name": "", "participants": [], "grid": []}'));Ee(a,d,o=>s(1,l=o)),d.subscribe(o=>{localStorage.setItem(r,JSON.stringify(o))});const h=o=>{const t=o.currentTarget,v=Array.from(new FormData(t).keys());d.update(u=>({...u,grid:v}))};function p(){n=this.checked,s(0,n)}return a.$$set=o=>{"groupId"in o&&s(5,r=o.groupId)},[n,l,c,d,h,r,p]}class Ue extends Te{constructor(e){super(),je(this,e,Re,Pe,ke,{groupId:5})}}function ve(a,e,s){const l=a.slice();return l[12]=e[s],l}function ge(a,e,s){const l=a.slice();return l[15]=e[s],l[17]=s,l}function be(a){let e,s=a[17]==0?"main":"bonus",l;return{c(){e=k("h2"),l=M(s),this.h()},l(r){e=E(r,"H2",{class:!0});var n=j(e);l=V(n,s),n.forEach(g),this.h()},h(){b(e,"class","svelte-1bc092w")},m(r,n){I(r,e,n),m(e,l)},p:q,d(r){r&&g(e)}}}function me(a){let e,s,l=a[12]+"",r,n,f,c,d,h,p=A(new Array(a[2].length)),o=[];for(let t=0;t<p.length;t+=1)o[t]=be(ge(a,p,t));return c=new Ue({props:{groupId:a[12]}}),c.$on("destroy",a[5]),{c(){e=k("div"),s=k("h1"),r=M(l),n=O();for(let t=0;t<o.length;t+=1)o[t].c();f=O(),Se(c.$$.fragment),d=O(),this.h()},l(t){e=E(t,"DIV",{class:!0});var v=j(e);s=E(v,"H1",{style:!0,class:!0});var u=j(s);r=V(u,l),u.forEach(g),n=S(v);for(let i=0;i<o.length;i+=1)o[i].l(v);f=S(v),De(c.$$.fragment,v),d=S(v),v.forEach(g),this.h()},h(){Y(s,"grid-colum","1 / -1"),b(s,"class","svelte-1bc092w"),b(e,"class","svelte-1bc092w")},m(t,v){I(t,e,v),m(e,s),m(s,r),m(e,n);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);m(e,f),Be(c,e,null),m(e,d),h=!0},p(t,v){if((!h||v&4)&&l!==(l=t[12]+"")&&Q(r,l),v&4){p=A(new Array(t[2].length));let i;for(i=0;i<p.length;i+=1){const w=ge(t,p,i);o[i]?o[i].p(w,v):(o[i]=be(w),o[i].c(),o[i].m(e,f))}for(;i<o.length;i+=1)o[i].d(1);o.length=p.length}const u={};v&4&&(u.groupId=t[12]),c.$set(u)},i(t){h||(x(c.$$.fragment,t),h=!0)},o(t){K(c.$$.fragment,t),h=!1},d(t){t&&g(e),G(o,t),Ne(c)}}}function Me(a){let e,s,l="Add Group",r,n,f="Clear",c,d,h,p,o,t,v="Participants for new group (comma or newline separated):",u,i,w,_,D="Create Group",R,B,N="Close",J,z,W,H=A(a[2]),y=[];for(let T=0;T<H.length;T+=1)y[T]=me(ve(a,H,T));const ye=T=>K(y[T],1,1,()=>{y[T]=null});return{c(){e=k("div"),s=k("button"),s.textContent=l,r=O(),n=k("button"),n.textContent=f,c=O(),d=k("div");for(let T=0;T<y.length;T+=1)y[T].c();h=O(),p=k("dialog"),o=k("form"),t=k("label"),t.textContent=v,u=O(),i=k("textarea"),w=O(),_=k("button"),_.textContent=D,R=O(),B=k("button"),B.textContent=N,this.h()},l(T){e=E(T,"DIV",{class:!0});var $=j(e);s=E($,"BUTTON",{class:!0,"data-svelte-h":!0}),U(s)!=="svelte-j1mpo7"&&(s.textContent=l),r=S($),n=E($,"BUTTON",{class:!0,"data-svelte-h":!0}),U(n)!=="svelte-1pityn1"&&(n.textContent=f),$.forEach(g),c=S(T),d=E(T,"DIV",{class:!0,style:!0});var C=j(d);for(let X=0;X<y.length;X+=1)y[X].l(C);C.forEach(g),h=S(T),p=E(T,"DIALOG",{class:!0});var F=j(p);o=E(F,"FORM",{class:!0});var L=j(o);t=E(L,"LABEL",{for:!0,"data-svelte-h":!0}),U(t)!=="svelte-84s6v8"&&(t.textContent=v),u=S(L),i=E(L,"TEXTAREA",{name:!0,id:!0,rows:!0}),j(i).forEach(g),w=S(L),_=E(L,"BUTTON",{class:!0,"data-svelte-h":!0}),U(_)!=="svelte-5hbba9"&&(_.textContent=D),R=S(L),B=E(L,"BUTTON",{class:!0,"data-svelte-h":!0}),U(B)!=="svelte-yf8co5"&&(B.textContent=N),L.forEach(g),F.forEach(g),this.h()},h(){b(s,"class","svelte-1bc092w"),b(n,"class","svelte-1bc092w"),b(e,"class","buttonwrapper svelte-1bc092w"),b(d,"class","groupwrapper svelte-1bc092w"),Y(d,"--colcount",a[2].length),b(t,"for","participants"),b(i,"name","participants"),b(i,"id","#participants"),b(i,"rows","10"),b(_,"class","svelte-1bc092w"),b(B,"class","svelte-1bc092w"),b(o,"class","svelte-1bc092w"),b(p,"class","svelte-1bc092w")},m(T,$){I(T,e,$),m(e,s),m(e,r),m(e,n),I(T,c,$),I(T,d,$);for(let C=0;C<y.length;C+=1)y[C]&&y[C].m(d,null);I(T,h,$),I(T,p,$),m(p,o),m(o,t),m(o,u),m(o,i),ee(i,a[1]),m(o,w),m(o,_),m(o,R),m(o,B),a[11](p),J=!0,z||(W=[P(s,"click",a[7]),P(n,"click",a[8]),P(i,"input",a[9]),P(_,"click",a[4]),P(B,"click",a[10])],z=!0)},p(T,[$]){if($&36){H=A(T[2]);let C;for(C=0;C<H.length;C+=1){const F=ve(T,H,C);y[C]?(y[C].p(F,$),x(y[C],1)):(y[C]=me(F),y[C].c(),x(y[C],1),y[C].m(d,null))}for(Ge(),C=H.length;C<y.length;C+=1)ye(C);Oe()}(!J||$&4)&&Y(d,"--colcount",T[2].length),$&2&&ee(i,T[1])},i(T){if(!J){for(let $=0;$<H.length;$+=1)x(y[$]);J=!0}},o(T){y=y.filter(Boolean);for(let $=0;$<y.length;$+=1)K(y[$]);J=!1},d(T){T&&(g(e),g(c),g(d),g(h),g(p)),G(y,T),a[11](null),z=!1,$e(W)}}}function Ve(a,e,s){let l,r=we([]);Ee(a,r,i=>s(2,l=i));let n,f="";const c=()=>{const i="Group "+(l.length+1).toString(),w=f.split(/[,\n\t]/).map(_=>_.trim()).filter(_=>_!=="");localStorage.setItem(i,JSON.stringify({name:i,participants:w,grid:[]})),r.update(_=>[..._,"Group "+(l.length+1).toString()]),n.close(),s(1,f="")};let d=()=>{Ie(r,l=Object.keys(localStorage),l)},h=()=>{localStorage.clear(),d()};Ce(d);const p=()=>n.showModal(),o=()=>{confirm("Are you sure you want to clear all data? There is no undo, and all groups are removed.")&&h()};function t(){f=this.value,s(1,f)}const v=()=>n.close();function u(i){Ae[i?"unshift":"push"](()=>{n=i,s(0,n)})}return[n,f,l,r,c,d,h,p,o,t,v,u]}class Ye extends Te{constructor(e){super(),je(this,e,Ve,Me,ke,{})}}export{Ye as component};
